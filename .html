<!-- Copyright 2022 DZavodov. All Rights Reserved. -->

<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8>
	<title>Num</title>

	<style>
		:root {
			/**  */
			--ContentColor: FloralWhite;
			/**  */
			--HoveredColor: DarkTurquoise;
			/**  */
			--BackGroundColor: #1b1b1b;
		}

		.button {
			color: var(--ContentColor);
			background-color: var(--BackGroundColor);
			border-color: var(--ContentColor);
			width: 20%;
			height: 20%;
			font-size: 40px;
			-webkit-transition-duration: 0.4s;
			transition-duration: 0.4s;
			border-radius: 50px;
		}
		.button:hover {
			border-color: var(--HoveredColor);
		}
	</style>
</head>
<body style="background-color: var(--BackGroundColor)">
	<p id=NumView class="numView" style="color: var(--ContentColor); text-align: center; margin-left: 10%; font-size: 72px; width: 80%; position: absolute; top: 20px;">Num</p>
	<div id=NumPad class="numPad" style="top: 200px; text-align: center; margin-left: 10%; height: 400px; width: 80%; position: absolute; top: 220px;">
		<button class="button" onclick="alert('1')">1</button>
		<button class="button" onclick="alert('2')">2</button>
		<button class="button" onclick="alert('3')">3</button><br />
		<button class="button" onclick="alert('4')">4</button>
		<button class="button" onclick="alert('5')">5</button>
		<button class="button" onclick="alert('6')">6</button><br />
		<button class="button" onclick="alert('7')">7</button>
		<button class="button" onclick="alert('8')">8</button>
		<button class="button" onclick="alert('9')">9</button><br />
		<button class="button" onclick="alert('Delete')"><</button>
		<button class="button" onclick="alert('0')">0</button>
		<button class="button" onclick="alert('Enter')">></button>
	</div>
	<script>
		/**
		 * TODO abstract
		 */
		class Sequence {
			#nextStepIndex;
			#blackBoxes;
			/**  */
			constructor(blackBoxes) {
				/**  */
				this.#nextStepIndex = 0;
				/**  */
				this.#blackBoxes = blackBoxes;
			}

			/**  */
			_getBlackBox_Unsafe(index) {
				return this.#blackBoxes[index];
			}

			/**  */
			isEmpty() { return false; }
			/**  */
			step() {
				++this.#nextStepIndex;
			}
			reset() {
				this.#nextStepIndex = 0;
			}
		}
		/**
		 *
		 */
		class RandomSequence extends Sequence {
			/**  */
			step() {
				this._getBlackBox_Unsafe(0).enqueue(["0"]);
			}
		}

		/**
		 *
		 */
		class BlackBox {
			#view;
			#nums;
			/**  */
			constructor(view) {
				/**  */
				this.#view = view;
				/**  */
				this.#nums = [];
			}
			/**  */
			enqueue(nums) {
				for (let index = 0; index < nums.length; ++index) {
					setTimeout(function (nums, num) {
						nums.push(num);
					}, index * 1000, this.#nums, nums[index]);
				}
			}
			/**  */
			dequeue(num) {
				return true;
			}
		}

		/**  */
		const sequence = new RandomSequence([new BlackBox(document.getElementById("BlackBox"))]);
		sequence.step();

		console.log(sequence);

		/**  */
		function onEnterDigit(value) {
			if (Num.value != str(value)) {

			}

			if (sequence.isEmpty()) { console.error("Sequence ended!"); sequence.reset(); }

			sequence.step();
		}
	</script>
</body>
</html>
